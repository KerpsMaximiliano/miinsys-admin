<h1 mat-dialog-title>Acción - {{titulo}}</h1>
<h2 mat-dialog-title *ngIf="fecha != ''">{{fecha | fechaRespuestaCuestionario}}</h2>
<div mat-dialog-content [formGroup]="incidenciaForm">
  <div *ngIf="checks.aprobacion">
    <mat-form-field class="w-full mt-4">
        <mat-label>Próximo Estado</mat-label>
        <mat-icon mat-icon matPrefix class="mr-4">
            assignment_turned_in
        </mat-icon>
        <mat-select formControlName="estado" (selectionChange)="estadoChange($event)">
            <mat-option *ngFor="let estado of estados" [value]="estado.ince_id">{{estado.ince_descripcion}}</mat-option>
        </mat-select>
    </mat-form-field>
  </div>
  <div *ngIf="justificacion">
    <mat-form-field class="w-full mt-4">
        <mat-label>Justificación rechazado</mat-label>
        <mat-icon mat-icon matPrefix class="mr-4">
            assignment_turned_in
        </mat-icon>
        <input matInput type="text" name="justificado" formControlName="justificado">
    </mat-form-field>
  </div>
  <div *ngIf="checks.planCierre">
    <mat-form-field class="w-full mt-4">
        <mat-label>Plan de cierre</mat-label>
        <mat-icon mat-icon matPrefix class="mr-4">
            event_busy
        </mat-icon>
        <input matInput type="text" name="planCierre" formControlName="planCierre">
    </mat-form-field>
  </div>
  <div *ngIf="checks.usuario">
    <mat-form-field class="w-full mt-4">
        <mat-label>Asignar usuario</mat-label>
        <mat-icon mat-icon matPrefix class="mr-4">
            person
        </mat-icon>
        <mat-select formControlName="usuario">
            <mat-option *ngFor="let usuario of usuarios" [value]="usuario.id">{{usuario.rut}} - {{usuario.userLastName}}, {{usuario.userFirstName}}</mat-option>
        </mat-select>
    </mat-form-field>
  </div>
  <div *ngIf="checks.adjunto">
    <div class="w-1/3">
        <button mat-button class="w-1/8 text-white" type="button" [style.background-color]="colours.mainButtonColor" (click)="uploadFile()" [disabled]="button" [ngStyle]="button ? {'background-color' : colours.disabledColor} : {'background-color' : colours.mainButtonColor}">Subir adjunto</button>
    </div>
  </div>
</div>
<div mat-dialog-actions class="flex justify-end gap-4">
  <button mat-button (click)="onNoClick()" [style.background-color]="colours.warnButtonColor" class="text-white">Cancelar</button>
  <button mat-button cdkFocusInitial [style.background-color]="colours.mainButtonColor" class="text-white" (click)="confirm()">Guardar</button>
</div>